(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},103:function(e,t,n){"use strict";n.r(t);var a=n(40),r=n(0),o=n.n(r),s=n(9),i=n.n(s),c=(n(49),n(11)),l=n(12),u=n(14),d=n(13),p=n(15),m=(n(50),n(51),n(52),n(5)),h=n.n(m),f=(n(54),n(55),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={updated:!1},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){this.state.updated||this.setState({updated:!0})}},{key:"render",value:function(){var e="TypedWord ";return this.state.updated&&this.props.incorrect?e+="both":this.props.incorrect?e+="incorrect":this.state.updated&&(e+="updated"),o.a.createElement("span",{className:e},this.props.word," ")}}]),t}(o.a.PureComponent)),y=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleClick=function(){n.inputRef.current&&n.inputRef.current.focus()},n.inputRef=o.a.createRef(),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.inputRef.current&&this.inputRef.current.focus()}},{key:"render",value:function(){var e=this,t=this.props.words.map(function(t,n){var a=e.props.correctWords[n]!==t;return o.a.createElement(f,{key:n,word:t,incorrect:a})});return o.a.createElement("div",{className:"Input"},"And type them below:",o.a.createElement("div",{className:"InputBox",onClick:this.handleClick},t,this.props.active&&o.a.createElement(g,{ref:this.inputRef,active:this.props.active,onChange:this.props.onChange,onWordTyped:this.props.onWordTyped,popPrevWord:this.props.popPrevWord})))}}]),t}(r.Component),g=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleKeyDown=function(e){8===e.keyCode&&""===e.target.innerText&&n.setText("".concat(n.props.popPrevWord()," "),!1)},n.handleInput=function(e){var t=e.target.innerText;if(/\s/.test(t)){for(var a=t.split(/\s/),r=[],o=0;o!==a.length-1;++o){n.props.onWordTyped(a[o])||r.push(a[o])}n.setText(r.join(" ")+a[a.length-1])}else n.props.onChange(t)},n.setText=function(e,t){n.inputRef.current.innerText=e;var a=document.createRange();a.selectNodeContents(n.inputRef.current),a.collapse(t);var r=window.getSelection();r.removeAllRanges(),r.addRange(a)},n.inputRef=o.a.createRef(),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"focus",value:function(){this.inputRef.current.focus()}},{key:"render",value:function(){return o.a.createElement("span",{className:"InputField",ref:this.inputRef,contentEditable:this.props.active,onInput:this.handleInput,onKeyDown:this.handleKeyDown})}}]),t}(r.Component);n(56);function v(e){return o.a.createElement("div",{className:"Indicators"},o.a.createElement(_,{text:"WPM: ".concat(e.wpm)}),o.a.createElement(_,{text:"Accuracy: ".concat(e.accuracy)}),o.a.createElement(_,{text:"Time: ".concat(e.remainingTime)}))}function _(e){return o.a.createElement("div",{className:"Indicator"},e.text)}var E=n(3),W=n.n(E);n(57),n(58);function T(e){return o.a.createElement("div",{className:"Entry"},o.a.createElement("div",{className:"Rank"},e.rank),o.a.createElement("div",{className:"Name"},e.name),o.a.createElement("div",{className:"Score"},e.score))}function b(e){return o.a.createElement(W.a,{size:"sm","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:e.show,onHide:e.onHide},o.a.createElement(W.a.Header,{closeButton:!0},o.a.createElement(W.a.Title,{className:"Header"},"Leaderboard")),o.a.createElement(W.a.Body,null,o.a.createElement("div",{className:"Entries"},o.a.createElement("p",{id:"Title"},"Top Ten Speeds"),Array(10).fill(0).map(function(e,t){return o.a.createElement(T,{name:"Manav",index:t,rank:t+1,score:100-t})}))),o.a.createElement(W.a.Footer,null,o.a.createElement("div",{className:"Footer"},o.a.createElement("p",null,"Your best speed is 56.1 WPM"))))}var w=n(41),C=n.n(w);n(94);function I(e){return o.a.createElement(W.a,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:e.show},o.a.createElement(W.a.Body,null,o.a.createElement("div",{className:"Spinner"},o.a.createElement("p",null,"Looking for opponents..."),o.a.createElement("p",null,e.numPlayers-1," ","other player(s) found so far!"),o.a.createElement(C.a,{animation:"border"}))))}n(95);function N(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(k,{id:"autoCorrectCheckBox",text:"Enable Auto-Correct",value:e.autoCorrect,onChange:e.onAutoCorrectToggle}),o.a.createElement("br",null),o.a.createElement(L,{onClick:e.onRestart}))}function k(e){return o.a.createElement("div",{className:"Options custom-control custom-checkbox"},o.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:e.id,checked:e.value,onChange:e.onChange}),o.a.createElement("label",{className:"custom-control-label",htmlFor:e.id},e.text))}function L(e){return o.a.createElement("div",{className:"Button"},o.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:e.onClick},"Restart"))}var S=n(24),x=n.n(S);n(96);function P(e){var t=function(t){return function(){e.setMode(t)}};return o.a.createElement(W.a,{size:"sm","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:e.show},o.a.createElement(W.a.Header,null,o.a.createElement(W.a.Title,null,"Welcome!")),o.a.createElement(W.a.Body,null,o.a.createElement("p",null,"Welcome to the 61A Typing Test!"),o.a.createElement("p",null,"Select a mode below to begin.")),o.a.createElement(W.a.Footer,null,o.a.createElement(x.a,{onClick:t(F.SINGLE),variant:"primary"},"Single Player"),o.a.createElement(x.a,{onClick:t(F.WAITING),variant:"warning"},"Multiplayer")))}n(99),n(100);function j(e){var t="Character ";return e.correct?t+="correct":e.wrong&&(t+="wrong"),o.a.createElement("span",{className:t},e.char)}function O(e){for(var t=e.promptedWords,n=e.typedWords,a=e.currWord,r=[],s=!1,i=0;i!==t.length;++i){var c=t[i],l=n[i];if(l){var u=c===l,d=!0,p=!1,m=void 0;try{for(var h,f=c[Symbol.iterator]();!(d=(h=f.next()).done);d=!0){var y=h.value;r.push(o.a.createElement(j,{key:r.length,char:y,correct:u,wrong:!u}))}}catch(I){p=!0,m=I}finally{try{d||null==f.return||f.return()}finally{if(p)throw m}}r.push(o.a.createElement(j,{key:r.length,char:" "}))}else if(s){var g=!0,v=!1,_=void 0;try{for(var E,W=c[Symbol.iterator]();!(g=(E=W.next()).done);g=!0){var T=E.value;r.push(o.a.createElement(j,{key:r.length,char:T}))}}catch(I){v=!0,_=I}finally{try{g||null==W.return||W.return()}finally{if(v)throw _}}r.push(o.a.createElement(j,{key:r.length,char:" "}))}else{for(var b=0;b!==c.length;++b){var w=a[b]&&c[b]===a[b],C=a[b]&&c[b]!==a[b];r.push(o.a.createElement(j,{key:r.length,char:c[b],correct:w,wrong:C}))}r.push(o.a.createElement(j,{key:r.length,char:" "})),s=!0}}return o.a.createElement("div",{className:"PromptBox"},"Look at the following words:",o.a.createElement("div",{className:"Prompt"},r))}var A=n(43),R=(n(101),n(42)),M=n.n(R);function B(e){var t=e.progress,n=e.playerIndex,a=["info","warning","success","danger"];return o.a.createElement("div",{className:"ProgressBars"},t.map(function(e,t){var r=Object(A.a)(e,2),s=r[0],i=r[1],c=1===s&&"".concat(i.toFixed(2)," seconds"),l=t===n?" (you)":"";return o.a.createElement("div",{className:"ProgressBar",key:t},o.a.createElement(M.a,{variant:a[t],animated:!0,label:"Player ".concat(t+1).concat(l),now:100*s}),o.a.createElement("div",{className:"barData"},c))}))}var F={SINGLE:"single",MULTI:"multi",WELCOME:"welcome",WAITING:"waiting"},D=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).initialize=function(){n.setState({typedWords:[],currWord:"",inputActive:!0,wpm:"None",accuracy:"None"}),h.a.post("/request_paragraph").done(function(e){n.state.pigLatin?h.a.post("/translate_to_pig_latin",{text:e},function(e){n.setState({promptedWords:e.split(" ")})}):n.setState({promptedWords:e.split(" ")})}),n.setState({startTime:0,currTime:0}),clearInterval(n.timer),n.timer=null},n.restart=function(){n.timer=setInterval(n.updateReadouts,100),n.setState({startTime:n.getCurrTime(),currTime:n.getCurrTime()})},n.updateReadouts=function(){var e=n.state.promptedWords.join(" "),t=n.state.typedWords.join(" ");h.a.post("/analyze",{promptedText:e,typedText:t,startTime:n.state.startTime,endTime:n.getCurrTime()}).done(function(e){n.setState({wpm:e[0].toFixed(1),accuracy:e[1].toFixed(1),currTime:n.getCurrTime()})})},n.reportProgress=function(){var e=n.state.promptedWords.join(" ");h.a.post("/report_progress",{id:n.state.id,typed:n.state.typedWords.join(" "),prompt:e})},n.requestProgress=function(){h.a.post("/request_progress",{targets:n.state.playerList}).done(function(e){n.setState({progress:e}),e.every(function(e){return 1===e[0]})&&(clearInterval(n.multiplayerTimer),n.fastestWords())})},n.fastestWords=function(){h.a.post("/fastest_words",{targets:n.state.playerList,prompt:n.state.promptedWords.join(" ")}).done(function(e){n.setState({fastestWords:e})})},n.popPrevWord=function(){if(0!==n.state.typedWords.length){var e=n.state.typedWords[n.state.typedWords.length-1];return n.setState(function(e){return{typedWords:e.typedWords.slice(0,e.typedWords.length-1)}}),e}return""},n.getCurrTime=function(){return(new Date).getTime()/1e3},n.handleWordTyped=function(e){if(!e)return!0;var t=n.state.typedWords.length;return n.setState(function(a){return a.autoCorrect&&e!==a.promptedWords[t]&&h.a.post("/autocorrect",{word:e}).done(function(a){n.setState(function(n){if(n.typedWords[t]!==e)return{};var r=n.typedWords;return r[t]=a,{typedWords:r}})}),{typedWords:a.typedWords.concat([e]),currWord:""}},function(){n.updateReadouts(),n.state.mode===F.MULTI&&n.reportProgress()}),!0},n.handleChange=function(e){n.setState({currWord:e}),n.state.typedWords.length+1===n.state.promptedWords.length&&n.state.promptedWords[n.state.promptedWords.length-1]===e?(clearInterval(n.timer),n.setState({inputActive:!1}),n.handleWordTyped(e)):n.timer||n.restart()},n.handlePigLatinToggle=function(){n.initialize(),n.setState(function(e){return{autoCorrect:!1,pigLatin:!e.pigLatin}})},n.handleAutoCorrectToggle=function(){n.initialize(),n.setState(function(e){return{autoCorrect:!e.autoCorrect,pigLatin:!1}})},n.setMode=function(e){n.setState({mode:e}),e===F.WAITING&&(n.multiplayerTimer=setInterval(n.requestMatch,1e3))},n.requestMatch=function(){h.a.post("/request_match",{id:n.state.id}).done(function(e){e.start?(n.setState({mode:F.MULTI,playerList:e.players,numPlayers:e.players.length,promptedWords:e.text.split(" "),progress:new Array(e.players.length).fill([0,0]),pigLatin:!1,autoCorrect:!1}),clearInterval(n.multiplayerTimer),n.multiplayerTimer=setInterval(n.requestProgress,500)):n.setState({numPlayers:e.numWaiting})})},n.toggleLeaderBoard=function(){n.setState(function(e){return{showLeaderboard:!e.showLeaderboard}})},n.state={promptedWords:["Please wait - loading!"],typedWords:[],wpm:"None",accuracy:"None",startTime:0,currTime:0,pigLatin:!1,autoCorrect:!1,currWord:"",inputActive:!1,numPlayers:1,mode:F.SINGLE,playerList:[],progress:[],showLeaderboard:!1,fastestWords:""},n.timer=null,n.multiplayerTimer=null,h.a.post("/request_id").done(function(e){null!==e&&n.setState({id:e.toString(),mode:F.WELCOME})}),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.initialize()}},{key:"componentDidUpdate",value:function(){this.state.mode===F.WELCOME||this.state.mode===F.WAITING||this.state.showLeaderboard?document.getElementById("app-root").style.filter="blur(5px)":document.getElementById("app-root").style.filter="none"}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer),clearInterval(this.multiplayerTimer)}},{key:"render",value:function(){var e=this.state,t=e.wpm,n=e.accuracy,a=e.numPlayers,r=e.startTime,s=e.currTime,i=e.playerList,c=e.id,l=e.fastestWords,u=(s-r).toFixed(1),d=i.indexOf(c),p=o.a.createElement("div",null,o.a.createElement("pre",null,l));return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"App container",id:"app-root"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col"},o.a.createElement("h1",{className:"display-4 mainTitle"},o.a.createElement("b",null,"C"),"S61A ",o.a.createElement("b",null,"A"),"utocorrected ",o.a.createElement("b",null,"T"),"yping ",o.a.createElement("b",null,"S"),"oftware"),o.a.createElement("br",null),o.a.createElement(v,{wpm:t,accuracy:n,remainingTime:u}),this.state.mode===F.MULTI&&o.a.createElement(B,{numPlayers:a,progress:this.state.progress,playerIndex:d}),o.a.createElement("br",null),o.a.createElement(O,{promptedWords:this.state.promptedWords,typedWords:this.state.typedWords,currWord:this.state.currWord}),o.a.createElement("br",null),o.a.createElement(y,{key:this.state.promptedWords[0],correctWords:this.state.promptedWords,words:this.state.typedWords,onWordTyped:this.handleWordTyped,onChange:this.handleChange,popPrevWord:this.popPrevWord,active:this.state.inputActive}),o.a.createElement("br",null),this.state.mode!==F.MULTI&&o.a.createElement(N,{pigLatin:this.state.pigLatin,onPigLatinToggle:this.handlePigLatinToggle,autoCorrect:this.state.autoCorrect,onAutoCorrectToggle:this.handleAutoCorrectToggle,onRestart:this.initialize}),this.state.mode===F.MULTI&&p))),o.a.createElement(P,{show:this.state.mode===F.WELCOME,setMode:this.setMode,toggleFindingOpponents:this.toggleFindingOpponents}),o.a.createElement(I,{show:this.state.mode===F.WAITING,numPlayers:this.state.numPlayers}),o.a.createElement(b,{show:this.state.showLeaderboard,onHide:this.toggleLeaderBoard}))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function U(){var e=Object(a.a)(["\n _________________________________________ \n/ Hello adventurous student! If you want  | to see the source of the GUI, go to Dev |\n| Tools => Sources => Page => top =>      |\n| [this domain] => static => js and       |\n enjoy!                                  /\n ----------------------------------------- \n                                  _\n                            |                             | |\n                             | |\n        |                   | |\n       /, ~                / /\n      X     `-.....-------./ /\n       ~-. ~  ~              |\n                       /    |\n             /_     ___   /\n           | / ~~~~~    |\n           | |         || |\n           | |        || )\n          (_/ (_/      ((_/\n"],["\n _________________________________________ \n/ Hello adventurous student! If you want  \\\n| to see the source of the GUI, go to Dev |\n| Tools => Sources => Page => top =>      |\n| [this domain] => static => js and       |\n\\ enjoy!                                  /\n ----------------------------------------- \n  \\\n   \\\n    \\                         _\n     \\                       | \\\n      \\                      | |\n                             | |\n        |\\                   | |\n       /, ~\\                / /\n      X     \\`-.....-------./ /\n       ~-. ~  ~              |\n          \\             /    |\n           \\  /_     ___\\   /\n           | /\\ ~~~~~   \\ |\n           | | \\        || |\n           | |\\ \\       || )\n          (_/ (_/      ((_/\n"]);return U=function(){return e},e}document.body.prepend(new Comment(String.raw(U()))),i.a.render(o.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},44:function(e,t,n){e.exports=n(103)},49:function(e,t,n){},50:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},99:function(e,t,n){}},[[44,1,2]]]);
//# sourceMappingURL=main.c41ec7fa.chunk.js.map